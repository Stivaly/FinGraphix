{% extends 'fingraphixapp/base.html' %}
{% load static %}
{% block title %}Análisis | FinGraphix{% endblock %}

{% block content %}
<div id="services" class="services section">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 offset-lg-2">
          <div class="section-heading  wow fadeInDown" data-wow-duration="1s" data-wow-delay="0.5s">
            <h4>Informes Visuales: <em>Comprende Tus Finanzas</em> a Simple Vista</h4>
            <img src="{% static 'assets/images/heading-line-dec.png' %}" alt="">
            <p>Nuestra aplicación se distingue por ofrecer informes visuales  <a rel="nofollow" href="https://www.toocss.com/" target="_blank"></a> que transforman datos complejos en representaciones claras y comprensibles. <a href="https://templatemo.com/contact" target="_parent"></a></p>
          </div>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="row">
        <div class="con-lg-12 my-5">
          <div class="gradient-button d-flex justify-content-center">
            <a href="{% url 'dashboard' %}">
              <i class="fa fa-sign-in-alt"></i> 
              Ir a tu Dashboard
            </a>
          </div>
        </div>
        <div class="col-lg-4">
          <div class="service-item first-service">
            <div class="icon"></div>
            <h4>Ingresos {{current_month}}</h4>
            <div id="ingresos"></div>
            <div class="text-button">
              <a href="#">Descargar Detalle <i class="fa fa-arrow-right"></i></a>
            </div>
          </div>
        </div>
        <div class="col-lg-4">
          <div class="service-item second-service">
            <div class="icon"></div>
            <h4>Egresos {{current_month}}</h4>
            <div id="egresos"></div>
            <div class="text-button">
              <a href="#">Descargar Detalle <i class="fa fa-arrow-right"></i></a>
            </div>
          </div>
        </div>
        <div class="col-lg-4">
          <div class="service-item third-service">
            <div class="icon"></div>
            <h4>Balance Año {{current_year}}</h4>
            <div id="balanceActual"></div>
            <div class="text-button">
              <a href="#">Descargar Detalle <i class="fa fa-arrow-right"></i></a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>  <!-- Cargar la librería aquí -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    let datosIngresos = {
      chart: { type: 'line' },
      zoom: {
            enabled: true,  // Habilita el zoom
            type: 'xy',      // Puede ser 'x', 'y', o 'xy'
        },
      series: [{
        name: 'Ingreso',
        data: [4500, 4700, 5000, 5200, 5500, 5900, 6200, 7000, 8000, 10000, 5000, 2000]
      }],
      xaxis: { categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dec'] },
      colors: ['#00E396'],
    };

    let ingresos = new ApexCharts(document.querySelector("#ingresos"), datosIngresos);
    ingresos.render();

    let datosEgresos = {
        chart: { type: 'line' },
        series: [{
            name: 'Egreso',
            data: [70, 60,50, 45, 40]
        }],
        xaxis: {
            categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul']
        },
        colors: ['#DC143C'],
        };

    let egresos = new ApexCharts(document.querySelector("#egresos"), datosEgresos);
    egresos.render();

    let balanceAnoActual = {
    chart: { type: 'bar' },
    series: [{
        name: 'Balance',
        data: [30, 40, 45, 50, 49, 60, 70]
    }],
    xaxis: {
        categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul']
    },
    colors: ['#FEB019',],
    };

    let balanceActual = new ApexCharts(document.querySelector("#balanceActual"), balanceAnoActual);
    balanceActual.render();
  });
</script>
{% endblock scripts %}